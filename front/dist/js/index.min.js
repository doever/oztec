function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){this.page=2,this.category=0,this.ulObj=$(".list-inner-group"),this.loadMoreBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=$(".page-control"),t=0;t<n.bannerCount;t++){var r=$("<li></li>");e.append(r),0===t&&r.addClass("active")}e.css({width:12*n.bannerCount+16+16*n.bannerCount})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;n.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate(),$(e).addClass("active").siblings().removeClass("active")})})},Banner.prototype.run=function(){this.loop(),this.initBanner(),this.initPageControl(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.ListenLoadMoreEvent=function(){var r=this;r.loadMoreBtn.click(function(){csrfajax.get({url:"/news/news_list/",data:{page:r.page,category:r.category},success:function(n){if(200===n.code){var e=n.data;if(0!==e.length){var t=template("more_news",{news:e});r.ulObj.append(t),r.page+=1}else r.loadMoreBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab li").click(function(){a.page=1;var r=$(this),i=r.attr("data-category");csrfajax.get({url:"/news/news_list/",data:{page:a.page,category:i},success:function(n){if(200===n.code){a.ulObj.empty();var e=n.data,t=template("more_news",{news:e});a.ulObj.append(t),r.addClass("active").siblings().removeClass("active"),a.page=2,a.category=i,a.loadMoreBtn.show()}},error:function(n){console.log(n)}})})},Index.prototype.run=function(){this.ListenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwYWdlIiwiY2F0ZWdvcnkiLCJ1bE9iaiIsImxvYWRNb3JlQnRuIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsInNlbGYiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiTGlzdGVuTG9hZE1vcmVFdmVudCIsImNzcmZhamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzIiwidHBsIiwidGVtcGxhdGUiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwiY3VycmVudExpIiwiYXR0ciIsImVtcHR5IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFjLElBQ25CRCxLQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsS0FBS0ksTUFBTSxFQUNYSixLQUFLSyxVQUFZRixFQUFFLGVBQ25C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OUJYLFNBQVNDLElBQUksQ0FDVEMsSUFBTSxtQkFDTkMsS0FBTyxDQUNINUMsS0FBT00sRUFBS04sS0FDWkMsU0FBV0EsR0FFZjRDLFFBQVUsU0FBVUMsR0FDaEIsR0FBb0IsTUFBakJBLEVBQWEsS0FBUSxDQUNwQnhDLEVBQUtKLE1BQU1tRCxRQUNYLElBQUlOLEVBQU9ELEVBQWEsS0FDcEJFLEVBQU1DLFNBQVMsWUFBWSxDQUFDRixLQUFPQSxJQUN2Q3pDLEVBQUtKLE1BQU1TLE9BQU9xQyxHQUNsQkcsRUFBVWhDLFNBQVMsVUFBVU8sV0FBV0MsWUFBWSxVQUNwRHJCLEVBQUtOLEtBQU8sRUFDWk0sRUFBS0wsU0FBV0EsRUFDaEJLLEVBQUtILFlBQVltQixTQUd6QmdDLE1BQVEsU0FBVUEsR0FDZEMsUUFBUUMsSUFBSUYsU0FNNUJ2RCxNQUFNSyxVQUFVbUMsSUFBTSxXQUNQckQsS0FDTnNELHNCQURNdEQsS0FFTmdFLDZCQUtUN0QsRUFBRSxZQUNlLElBQUlKLFFBQ1ZzRCxPQUNLLElBQUl4QyxPQUNWd0MiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy/ova7mkq3lm75cclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXg9MTtcclxuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0LWFycm93XCIpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcclxuICAgIHRoaXMuYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxufVxyXG5cclxuLy/liqjmgIHorr7nva7mlL7nva7ova7mkq3lm751bOeahOWuveW6pu+8jOmYsuatouWGmeatu1xyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XHJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksXCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxufTtcclxuXHJcbi8v5Yqo5oCB5re75Yqg5ZyG54K55o6n5Yi25ZmoXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XHJcbiAgICBmb3IodmFyIGk9MDtpPHNlbGYuYmFubmVyQ291bnQ7aSsrKXtcclxuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTtcclxuICAgICAgICBwYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZihpPT09MCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lckNvdW50KjEyKzgqMisxNiooc2VsZi5iYW5uZXJDb3VudCl9KTtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYoaXNTaG93KXtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuaGlkZSgpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmJhbm5lclVsLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjotNzk4KnNlbGYuaW5kZXh9LDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYoaW5kZXg9PT0wKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgIH1lbHNlIGlmKGluZGV4PT09c2VsZi5iYW5uZXJDb3VudCsxKXtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXgtMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID10aGlzO1xyXG4gICAgc2VsZi50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleD49c2VsZi5iYW5uZXJDb3VudCsxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXg9MjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sMjAwMCk7XHJcbn07XHJcblxyXG4vL+ebkeWQrOm8oOagh+enu+WFpeenu+WHuuS6i+S7tlxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6byg5qCH56e75YWl5LqL5Lu2XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/pvKDmoIfnp7vlh7rkuovku7ZcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuLy/nm5HlkKznrq3lpLTngrnlh7vkuovku7ZcclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXg9PT0wKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lckNvdW50KnNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4PT09c2VsZi5iYW5uZXJDb3VudCsxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vL+ebkeWQrOWchueCueeCueWHu+S6i+S7tlxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlblBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGksb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaSsxO1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICAgICAgJChvYmopLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubG9vcCgpO1xyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xyXG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xyXG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XHJcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBJbmRleCgpe1xyXG4gICAgdGhpcy5wYWdlID0gMjtcclxuICAgIHRoaXMuY2F0ZWdvcnkgPSAwO1xyXG4gICAgdGhpcy51bE9iaiA9ICQoJy5saXN0LWlubmVyLWdyb3VwJyk7XHJcbiAgICB0aGlzLmxvYWRNb3JlQnRuID0gJCgnI2xvYWQtbW9yZS1idG4nKTtcclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLkxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHNlbGYubG9hZE1vcmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNzcmZhamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOicvbmV3cy9uZXdzX2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICdwYWdlJzpzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOnNlbGYuY2F0ZWdvcnlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT09MjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3cyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3MubGVuZ3RoICE9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdtb3JlX25ld3MnLHsnbmV3cyc6bmV3c30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVsT2JqLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UrPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZE1vcmVCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJncm91cCA9ICQoXCIubGlzdC10YWIgbGlcIik7XHJcbiAgICB0YWJncm91cC5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5wYWdlID0gMTtcclxuICAgICAgICB2YXIgY3VycmVudExpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSBjdXJyZW50TGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgY3NyZmFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL25ld3NfbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgXCJwYWdlXCI6c2VsZi5wYWdlLFxyXG4gICAgICAgICAgICAgICAgXCJjYXRlZ29yeVwiOmNhdGVnb3J5XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51bE9iai5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCdtb3JlX25ld3MnLHsnbmV3cyc6bmV3c30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudWxPYmouYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRNb3JlQnRuLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2Vycm9yJzpmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLkxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpXHJcbn07XHJcblxyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcbn0pOyJdfQ==
