function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){this.page=2,this.category=0,this.ulObj=$(".list-inner-group"),this.loadMoreBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),r=((new Date).getTime()-t)/1e3;return r<60?"刚刚":60<=r&&r<3600?(minutes=parseInt(r/60),minutes+"分钟前"):3600<=r&&r<86400?(hours=parseInt(r/60/60),hours+"小时前"):86400<=r&&r<2592e3?(days=parseInt(r/60/60/24),days+"天前"):e.getFullYear()+"-"+e.getMonth()+"-"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=$(".page-control"),t=0;t<n.bannerCount;t++){var r=$("<li></li>");e.append(r),0===t&&r.addClass("active")}e.css({width:12*n.bannerCount+16+16*n.bannerCount})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;n.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate(),$(e).addClass("active").siblings().removeClass("active")})})},Banner.prototype.run=function(){this.loop(),this.initBanner(),this.initPageControl(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.ListenLoadMoreEvent=function(){var r=this;r.loadMoreBtn.click(function(){csrfajax.get({url:"/news/news_list/",data:{page:r.page,category:r.category},success:function(n){if(200===n.code){var e=n.data;if(0!==e.length){var t=template("more_news",{news:e});r.ulObj.append(t),r.page+=1}else r.loadMoreBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab li").click(function(){a.page=1;var r=$(this),i=r.attr("data-category");csrfajax.get({url:"/news/news_list/",data:{page:a.page,category:i},success:function(n){if(200===n.code){a.ulObj.empty();var e=n.data,t=template("more_news",{news:e});a.ulObj.append(t),r.addClass("active").siblings().removeClass("active"),a.page=2,a.category=i,a.loadMoreBtn.show()}},error:function(n){console.log(n)}})})},Index.prototype.run=function(){this.ListenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwYWdlIiwiY2F0ZWdvcnkiLCJ1bE9iaiIsImxvYWRNb3JlQnRuIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRhVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJzZWxmIiwiZmlyc3RCYW5uZXIiLCJlcSIsImNsb25lIiwibGFzdEJhbm5lciIsImFwcGVuZCIsInByZXBlbmQiLCJjc3MiLCJ3aWR0aCIsImxlZnQiLCJpbml0UGFnZUNvbnRyb2wiLCJpIiwiY2lyY2xlIiwiYWRkQ2xhc3MiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwiYW5pbWF0ZSIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiTGlzdGVuTG9hZE1vcmVFdmVudCIsImNzcmZhamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzIiwidHBsIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImN1cnJlbnRMaSIsImF0dHIiLCJlbXB0eSIsImVycm9yIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1BQU0sRUFDWEosS0FBS0ssVUFBWUYsRUFBRSxlQUNuQkgsS0FBS00sV0FBYUgsRUFBRSxnQkFDcEJILEtBQUtPLFNBQVdKLEVBQUUsY0FDbEJILEtBQUtRLE9BQVNSLEtBQUtPLFNBQVNFLFNBQVMsTUFDckNULEtBQUtVLFlBQWNWLEtBQUtRLE9BQU9HLE9BQy9CWCxLQUFLWSxZQUFjVCxFQUFFLGlCQW1JekIsU0FBU1UsUUFDTGIsS0FBS2MsS0FBTyxFQUNaZCxLQUFLZSxTQUFTLEVBQ2RmLEtBQUtnQixNQUFRYixFQUFFLHFCQUNmSCxLQUFLaUIsWUFBY2QsRUFBRSxrQkFHckJlLFNBQVNDLFNBQVNDLFFBQVFDLFVBQVksU0FBVUMsR0FDNUMsSUFBSUMsRUFBTyxJQUFJQyxLQUFLRixHQUNoQkcsRUFBU0YsRUFBS0csVUFFZEMsSUFETSxJQUFLSCxNQUFRRSxVQUNGRCxHQUFRLElBQzdCLE9BQUdFLEVBQVUsR0FDRixLQUNTLElBQVhBLEdBQWlCQSxFQUFVLE1BQ2hDQyxRQUFVQyxTQUFTRixFQUFVLElBQ3RCQyxRQUFRLE9BQ0MsTUFBWEQsR0FBb0JBLEVBQVUsT0FDbkNHLE1BQVFELFNBQVNGLEVBQVUsR0FBRyxJQUN2QkcsTUFBTSxPQUNHLE9BQVhILEdBQXVCQSxFQUFVLFFBQ3RDSSxLQUFPRixTQUFTRixFQUFVLEdBQUcsR0FBRyxJQUN6QkksS0FBSyxNQUVEUixFQUFLUyxjQU1KLElBTEFULEVBQUtVLFdBS0ssSUFKWlYsRUFBS1csU0FJZSxJQUhuQlgsRUFBS1ksV0FHdUIsSUFGMUJaLEVBQUthLGFBRWdDLElBRHJDYixFQUFLYyxjQTVKOUJ0QyxPQUFPdUMsVUFBVUMsV0FBYSxXQUMxQixJQUFJQyxFQUFP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LEdBQ2xCRSxFQUFVOUIsU0FBUyxVQUFVTSxXQUFXQyxZQUFZLFVBQ3BEcEIsRUFBSzFCLEtBQU8sRUFDWjBCLEVBQUt6QixTQUFXQSxFQUNoQnlCLEVBQUt2QixZQUFZdUMsU0FHekI4QixNQUFRLFNBQVVBLEdBQ2RDLFFBQVFDLElBQUlGLFNBTTVCekUsTUFBTXlCLFVBQVVrQyxJQUFNLFdBQ1B4RSxLQUNOeUUsc0JBRE16RSxLQUVOa0YsNkJBS1QvRSxFQUFFLFlBQ2UsSUFBSUosUUFDVnlFLE9BQ0ssSUFBSTNELE9BQ1YyRCIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+i9ruaSreWbvlxyXG5mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5pbmRleD0xO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG4vL+WKqOaAgeiuvue9ruaUvue9rui9ruaSreWbvnVs55qE5a695bqm77yM6Ziy5q2i5YaZ5q27XHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQtMSkuY2xvbmUoKTtcclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJXaWR0aCooc2VsZi5iYW5uZXJDb3VudCsyKSxcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuLy/liqjmgIHmt7vliqDlnIbngrnmjqfliLblmahcclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgcGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxuICAgIGZvcih2YXIgaT0wO2k8c2VsZi5iYW5uZXJDb3VudDtpKyspe1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHBhZ2VDb250cm9sLmFwcGVuZChjaXJjbGUpO1xyXG4gICAgICAgIGlmKGk9PT0wKXtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50KX0pO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZihpc1Nob3cpe1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6LTc5OCpzZWxmLmluZGV4fSw1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmKGluZGV4PT09MCl7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmJhbm5lckNvdW50LTE7XHJcbiAgICB9ZWxzZSBpZihpbmRleD09PXNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4LTE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9dGhpcztcclxuICAgIHNlbGYudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXg+PXNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4PTI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LDIwMDApO1xyXG59O1xyXG5cclxuLy/nm5HlkKzpvKDmoIfnp7vlhaXnp7vlh7rkuovku7ZcclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+m8oOagh+enu+WFpeS6i+S7tlxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6byg5qCH56e75Ye65LqL5Lu2XHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcbi8v55uR5ZCs566t5aS054K55Ye75LqL5Lu2XHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4PT09MCl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJDb3VudCpzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50LTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleD09PXNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy/nm5HlkKzlnIbngrnngrnlh7vkuovku7ZcclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpLG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGkrMTtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICAgICAgICAgICQob2JqKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKXtcclxuICAgIHRoaXMucGFnZSA9IDI7XHJcbiAgICB0aGlzLmNhdGVnb3J5PTA7XHJcbiAgICB0aGlzLnVsT2JqID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcclxuICAgIHRoaXMubG9hZE1vcmVCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xyXG5cclxuICAgIC8vIGFydHRlbXBsYXRlc+eahOi/h+a7pOWZqOWGmeazlSznsbvkvLxkamFuZ2/mqKHmnb/ov4fmu6TlmahcclxuICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGFWYWx1ZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0YVZhbHVlKTtcclxuICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdmFyIG5vdyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3ctZGF0ZXRzKS8xMDAwO1xyXG4gICAgICAgIGlmKHRpbWVzdGFtcDw2MCl7XHJcbiAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcclxuICAgICAgICB9ZWxzZSBpZih0aW1lc3RhbXA+PTYwICYmIHRpbWVzdGFtcDw2MCo2MCl7XHJcbiAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lc3RhbXAvNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gbWludXRlcysn5YiG6ZKf5YmNJztcclxuICAgICAgICB9ZWxzZSBpZih0aW1lc3RhbXA+PTYwKjYwICYmIHRpbWVzdGFtcDw2MCo2MCoyNCl7XHJcbiAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhvdXJzKyflsI/ml7bliY0nO1xyXG4gICAgICAgIH1lbHNlIGlmKHRpbWVzdGFtcD49NjAqNjAqMjQgJiYgdGltZXN0YW1wPDYwKjYwKjI0KjMwKXtcclxuICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MC82MC8yNCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXlzKyflpKnliY0nO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgdmFyIG1vdXRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgdmFyIHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgICAgICByZXR1cm4geWVhcisnLScrbW91dGgrJy0nK2RheSsnICcraG91cisnOicrbWludXRlKyc6JytzZWNvbmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUuTGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgc2VsZi5sb2FkTW9yZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY3NyZmFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL25ld3NfbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ3BhZ2UnOnNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6c2VsZi5jYXRlZ29yeVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PT0yMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3cy5sZW5ndGggIT09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ21vcmVfbmV3cycseyduZXdzJzpuZXdzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudWxPYmouYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSs9MTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkTW9yZUJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRhYmdyb3VwID0gJChcIi5saXN0LXRhYiBsaVwiKTtcclxuICAgIHRhYmdyb3VwLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnBhZ2UgPSAxO1xyXG4gICAgICAgIHZhciBjdXJyZW50TGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IGN1cnJlbnRMaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcclxuICAgICAgICBjc3JmYWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzonL25ld3MvbmV3c19saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICBcInBhZ2VcIjpzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICBcImNhdGVnb3J5XCI6Y2F0ZWdvcnlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT09MjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnVsT2JqLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3MgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ21vcmVfbmV3cycseyduZXdzJzpuZXdzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51bE9iai5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZE1vcmVCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZXJyb3InOmZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuTGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KClcclxufTtcclxuXHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4gICAgYmFubmVyLnJ1bigpO1xyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSk7Il19
